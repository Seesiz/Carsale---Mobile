<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Ajout </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="container d-flex flex-column">
    <h1>Ajout</h1>
    <div class="row py-1">
      <div class="col-12 d-flex flex-column gap-2 align-items-center">
        <div
          class="d-flex flex-row gap-2 col-12 p-2 justify-content-start"
          style="overflow-x: auto; background-color: white; border-radius: 12px"
        >
          <div
            *ngFor="let img of base64Files; let i = index"
            class="d-flex flex-column justify-content-evenly align-items-center position-relative"
            style="
              overflow: hidden;
              height: 200px;
              min-width: 150px;
              background: linear-gradient(
                30deg,
                var(--secondary),
                var(--secondary-transparent)
              );
              border-radius: 10px;
            "
          >
            <img [src]="img" alt="" width="100%" height="100%" />
            <button
              class="btn btn-danger position-absolute"
              style="bottom: 2%; z-index: 100"
              (click)="deleteFile(i)"
            >
              Supprimer
            </button>
          </div>
          <label
            for="file"
            class="d-flex flex-column justify-content-evenly align-items-center"
            style="
              height: 200px;
              min-width: 150px;
              background: linear-gradient(
                30deg,
                var(--secondary),
                var(--secondary-transparent)
              );
              border-radius: 10px;
            "
          >
            <i
              class="fa-solid fa-plus"
              style="font-size: 20px; color: var(--primary)"
            ></i>
          </label>
        </div>
        <input
          type="file"
          name="data"
          id="file"
          class="invisible position-fixed"
          multiple
          (change)="onFileSelected($event)"
        />
        <label for="modele">Modèle:</label>
        <select
          name="modele"
          id="modele"
          class="form-select"
          [(ngModel)]="idModel"
        >
          <option *ngFor="let model of modeles" [value]="model.idModel">
            {{ model.designation }}
          </option>
        </select>
        <label for="categorie">Categorie:</label>
        <select
          name="categorie"
          id="categorie"
          class="form-select"
          [(ngModel)]="idCategorie"
        >
          <option
            *ngFor="let categorie of categories"
            [value]="categorie.idCategorie"
          >
            {{ categorie.designation }}
          </option>
        </select>
        <label for="plaque">Plaque:</label>
        <input
          type="text"
          name="plaque"
          id="plaque"
          class="form-control"
          placeholder="Plaque"
          [(ngModel)]="plaque"
        />
        <label for="prix">Prix:</label>
        <input
          type="number"
          name="prix"
          id="prix"
          class="form-control"
          placeholder="Prix"
          [(ngModel)]="prix"
        />
        <label for="etat">Etat:</label>
        <select name="etat" id="etat" class="form-select" [(ngModel)]="idEtat">
          <option *ngFor="let etat of etats" [value]="etat.idEtat">
            {{ etat.idEtat }}
          </option>
        </select>
        <label for="couleur">Couleur:</label>
        <input
          type="color"
          name="couleur"
          id="couleur"
          class="form-control"
          [(ngModel)]="couleur"
        />
        <div
          class="d-flex flex-row justify-content-between gap-2 align-items-end"
        >
          <span style="font-size: 20px">Caractéristique</span>
        </div>
        <span
          *ngFor="let item of caracter; let i = index"
          class="d-flex flex-row gap-2 justify-content-between align-items-center"
        >
          <input
            type="text"
            class="form-control"
            placeholder="Type"
            [(ngModel)]="item.designation"
          />
          <input
            type="text"
            class="form-control"
            placeholder="Valeur"
            [(ngModel)]="item.valeur"
          />
          <i class="fa fa-close" (click)="caracter.splice(i,1)"></i>
        </span>
        <span
          (click)="caracter.push({designation: '', valeur: ''})"
          style="cursor: pointer"
        >
          <i class="fa fa-circle-plus"></i>
          <span> Ajouter</span>
        </span>
        <button
          style="background-color: var(--secondary)"
          class="btn col-12"
          (click)="ajouter()"
        >
          Ajouter annonce
        </button>
      </div>
    </div>
  </div>
</ion-content>
